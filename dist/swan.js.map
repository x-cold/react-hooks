{"version":3,"file":"swan.js","sources":["../src/dom.js","../src/index.js"],"sourcesContent":["function createElement(fiber) {\n  const element =\n    fiber.type === 'text'\n      ? document.createTextNode('')\n      : document.createElement(fiber.type);\n  return element;\n}\n\nfunction render(vnode, container) {\n  // 当vnode为字符串时，渲染结果是一段文本\n  if (typeof vnode === 'string') {\n    const textNode = document.createTextNode(vnode);\n    return container.appendChild(textNode);\n  }\n\n  const dom = document.createElement(vnode.tag);\n\n  if (vnode.attrs) {\n    Object.keys(vnode.attrs).forEach(key => {\n      const value = vnode.attrs[key];\n      setAttribute(dom, key, value);    // 设置属性\n    });\n  }\n\n  vnode.children.forEach(child => render(child, dom));    // 递归渲染子节点\n  return container.appendChild(dom);    // 将渲染结果挂载到真正的DOM上\n}\n\nfunction setAttribute(dom, name, value) {\n  // 如果属性名是className，则改回class\n  if (name === 'className') name = 'class';\n\n  // 如果属性名是onXXX，则是一个事件监听方法\n  if (/on\\w+/.test(name)) {\n    name = name.toLowerCase();\n    dom[name] = value || '';\n    // 如果属性名是style，则更新style对象\n  } else if (name === 'style') {\n    if (!value || typeof value === 'string') {\n      dom.style.cssText = value || '';\n    } else if (value && typeof value === 'object') {\n      for (let name in value) {\n        // 可以通过style={ width: 20 }这种形式来设置样式，可以省略掉单位px\n        dom.style[name] = typeof value[name] === 'number' ? value[name] + 'px' : value[name];\n      }\n    }\n    // 普通属性则直接更新属性\n  } else {\n    if (name in dom) {\n      dom[name] = value || '';\n    }\n    if (value) {\n      dom.setAttribute(name, value);\n    } else {\n      dom.removeAttribute(name);\n    }\n  }\n}\n\nexport default {\n  render,\n  createElement\n}","import render from './dom';\n\nconst element = (\n  <div>\n      hello<span onClick={() => {}}>world!</span>\n  </div>\n);\n\nrender(element, document.getElementById('container'));\n"],"names":["createElement","fiber","element","type","document","createTextNode","render","vnode","container","textNode","appendChild","dom","tag","attrs","Object","keys","forEach","key","value","setAttribute","children","child","name","test","toLowerCase","style","cssText","removeAttribute","getElementById"],"mappings":"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"}